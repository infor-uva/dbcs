<div class="container">
  <h2>Hotel List</h2>
  <mat-accordion>
    @for(hotel of hotels; track hotel.id) {
    <mat-expansion-panel>
      <mat-expansion-panel-header>
        <mat-panel-title> {{ hotel.name }} </mat-panel-title>
        <mat-panel-description>
          {{ hotel.address.streetKind }} {{ hotel.address.streetName }} No.
          {{ hotel.address.number }}, {{ hotel.address.postCode }}
          {{ hotel.address.otherInfo }}
        </mat-panel-description>
      </mat-expansion-panel-header>

      <table mat-table [dataSource]="hotel.rooms" class="mat-elevation-z8">
        <ng-container matColumnDef="roomNumber">
          <th mat-header-cell *matHeaderCellDef>Room Number</th>
          <td mat-cell *matCellDef="let room">{{ room.roomNumber }}</td>
        </ng-container>

        <ng-container matColumnDef="type">
          <th mat-header-cell *matHeaderCellDef>Type</th>
          <td mat-cell *matCellDef="let room">{{ room.type }}</td>
        </ng-container>

        <ng-container matColumnDef="available">
          <th mat-header-cell *matHeaderCellDef>Available</th>
          <td mat-cell *matCellDef="let room">
            <mat-slide-toggle
              [checked]="room.available"
              (change)="toggleRoomAvailability(hotel.id, room.id)"
            ></mat-slide-toggle>
          </td>
        </ng-container>

        <tr
          mat-header-row
          *matHeaderRowDef="['roomNumber', 'type', 'available']"
        ></tr>
        <tr
          mat-row
          *matRowDef="let row; columns: ['roomNumber', 'type', 'available']"
        ></tr>
      </table>

      <button mat-raised-button (click)="deleteHotel(hotel.id)">
        Delete Hotel
      </button>
    </mat-expansion-panel>
    }
  </mat-accordion>
</div>
